# å‰åç«¯è”è°ƒæŒ‡å—

> **åˆ›å»ºæ—¶é—´**: 2025-12-12  
> **çŠ¶æ€**: âœ… å·²é…ç½®å®Œæˆ

---

## ğŸ”§ å·²ä¿®å¤çš„é—®é¢˜

### 1. Header ç»„ä»¶é”™è¯¯ âœ…
**é”™è¯¯**: `LikeOutlined is not defined`

**ä¿®å¤**:
- âœ… æ·»åŠ äº† `LikeOutlined` å¯¼å…¥
- âœ… æ·»åŠ äº† `ShareAltOutlined` å¯¼å…¥
- âœ… Header ç»„ä»¶ç°åœ¨å¯ä»¥æ­£å¸¸æ¸²æŸ“

### 2. åç«¯è¿æ¥é—®é¢˜ âœ…
**é”™è¯¯**: `Failed to load documents: AxiosError`

**ä¿®å¤**:
- âœ… åˆ›å»ºäº† Mock æ•°æ®æœåŠ¡ (`src/api/mock.js`)
- âœ… æ·»åŠ äº†è‡ªåŠ¨é™çº§æœºåˆ¶ï¼ˆåç«¯ä¸å¯ç”¨æ—¶è‡ªåŠ¨ä½¿ç”¨ Mock æ•°æ®ï¼‰
- âœ… åˆ›å»ºäº† `.env` é…ç½®æ–‡ä»¶
- âœ… ç°åœ¨å³ä½¿åç«¯æœªå¯åŠ¨ï¼Œå‰ç«¯ä¹Ÿèƒ½æ­£å¸¸æ˜¾ç¤ºæ•°æ®

---

## ğŸ“Š å½“å‰é…ç½®

### è‡ªåŠ¨é™çº§æ¨¡å¼
```javascript
// src/api/index.js
const AUTO_FALLBACK_TO_MOCK = true  // å¯ç”¨è‡ªåŠ¨é™çº§

// å·¥ä½œåŸç†ï¼š
// 1. ä¼˜å…ˆå°è¯•è¿æ¥åç«¯ API
// 2. å¦‚æœåç«¯ä¸å¯ç”¨ï¼ˆç½‘ç»œé”™è¯¯ï¼‰
// 3. è‡ªåŠ¨ä½¿ç”¨ Mock æ•°æ®
// 4. åœ¨æ§åˆ¶å°æ˜¾ç¤ºæç¤ºä¿¡æ¯
```

### Mock æ•°æ®èŒƒå›´
å·²æä¾› Mock æ•°æ®çš„æ¨¡å—ï¼š
- âœ… æ–‡æ¡£ç®¡ç†ï¼ˆdocumentsï¼‰
- âœ… è§’è‰²ç®¡ç†ï¼ˆrolesï¼‰
- âœ… åé¦ˆä¸æ¼”åŒ–ï¼ˆfeedback/conflictsï¼‰
- âœ… åä½œç½‘ç»œï¼ˆcollaboration/peersï¼‰
- âœ… æ¼”åŒ–å†å²ï¼ˆevolutionï¼‰
- âœ… è´¨é‡ç›‘æ§ï¼ˆqualityï¼‰
- âœ… äº¤æ¢å†å²ï¼ˆexchange-historyï¼‰
- âœ… ç½‘ç»œæ‹“æ‰‘ï¼ˆtopologyï¼‰
- âœ… åŒæ­¥çŠ¶æ€ï¼ˆsync-statusï¼‰

---

## ğŸš€ ä½¿ç”¨æ–¹å¼

### åœºæ™¯ 1: åç«¯æœªå¯åŠ¨ï¼ˆä½¿ç”¨ Mock æ•°æ®ï¼‰

**å½“å‰é…ç½®**ï¼ˆé»˜è®¤ï¼‰:
```javascript
// src/api/index.js
const AUTO_FALLBACK_TO_MOCK = true  // â† å·²å¯ç”¨
```

**æ•ˆæœ**:
- âœ… å‰ç«¯æ­£å¸¸æ˜¾ç¤ºæ‰€æœ‰é¡µé¢
- âœ… ä½¿ç”¨é¢„è®¾çš„ Mock æ•°æ®
- âœ… æ§åˆ¶å°æ˜¾ç¤ºï¼š`âš ï¸ Backend unavailable, falling back to mock data`
- âœ… æ§åˆ¶å°æ˜¾ç¤ºï¼š`âœ… Using mock data: /api/documents`

**æ“ä½œ**: æ— éœ€ä»»ä½•æ“ä½œï¼Œåˆ·æ–°é¡µé¢å³å¯

---

### åœºæ™¯ 2: è¿æ¥çœŸå®åç«¯

**æ­¥éª¤ 1**: å¯åŠ¨åç«¯æœåŠ¡
```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•
mvn spring-boot:run

# æˆ–è€…åœ¨ IDE ä¸­è¿è¡Œ Application.java
```

**æ­¥éª¤ 2**: é…ç½®å‰ç«¯ï¼ˆå·²é»˜è®¤é…ç½®å¥½ï¼‰
```javascript
// vite.config.js ä¸­çš„ä»£ç†é…ç½®
proxy: {
  '/api': {
    target: 'http://localhost:8080',  // åç«¯åœ°å€
    changeOrigin: true,
    secure: false
  }
}
```

**æ­¥éª¤ 3**: åˆ·æ–°å‰ç«¯é¡µé¢
- âœ… è‡ªåŠ¨è¿æ¥åˆ°åç«¯ API
- âœ… ä½¿ç”¨çœŸå®æ•°æ®
- âœ… æ§åˆ¶å°æ˜¾ç¤ºï¼š`âœ… Response: /api/documents (123ms)`

---

### åœºæ™¯ 3: çº¯ Mock æ¨¡å¼ï¼ˆå¯é€‰ï¼‰

å¦‚æœæƒ³**å¼ºåˆ¶ä½¿ç”¨** Mock æ•°æ®ï¼ˆå³ä½¿åç«¯å¯ç”¨ï¼‰ï¼š

**æ­¥éª¤ 1**: ä¿®æ”¹ `.env` æ–‡ä»¶
```bash
# UI/.env
VITE_ENABLE_MOCK=true  # æ”¹ä¸º true
```

**æ­¥éª¤ 2**: ä¿®æ”¹ `src/api/mock.js`
```javascript
const ENABLE_MOCK = import.meta.env.VITE_ENABLE_MOCK === 'true' || true  // æ”¹ä¸º true
```

**æ­¥éª¤ 3**: é‡å¯å¼€å‘æœåŠ¡å™¨
```bash
npm run dev
```

---

## ğŸ” æ§åˆ¶å°æ—¥å¿—è¯´æ˜

### æ­£å¸¸è¿æ¥åç«¯
```
ğŸ“¤ Request: GET /api/documents
âœ… Response: /api/documents (150ms)
```

### è‡ªåŠ¨é™çº§åˆ° Mock
```
ğŸ“¤ Request: GET /api/documents
âŒ Response error: [AxiosError: Network Error]
âš ï¸ Backend unavailable, falling back to mock data
âœ… Using mock data: /api/documents
```

### å¼ºåˆ¶ Mock æ¨¡å¼
```
ğŸ“¤ Request: GET /api/documents
âœ… Using mock data: /api/documents
```

---

## ğŸ§ª æµ‹è¯•æ¸…å•

### å‰ç«¯æµ‹è¯•ï¼ˆMock æ•°æ®ï¼‰
- [ ] åˆ·æ–°é¡µé¢ `http://localhost:3000`
- [ ] å¯¼èˆªæ æ˜¾ç¤º 6 ä¸ªèœå•é¡¹
- [ ] ç‚¹å‡»"æ–‡æ¡£ç®¡ç†"ï¼Œæ˜¾ç¤º 3 ä¸ªæ–‡æ¡£
- [ ] ç‚¹å‡»"è§’è‰²ç®¡ç†"ï¼Œæ˜¾ç¤º 3 ä¸ªè§’è‰²
- [ ] ç‚¹å‡»"åé¦ˆä¸æ¼”åŒ–"ï¼Œæ˜¾ç¤ºå†²çªåˆ—è¡¨
- [ ] ç‚¹å‡»"åä½œç½‘ç»œ"ï¼Œæ˜¾ç¤ºä¼™ä¼´åˆ—è¡¨
- [ ] æ§åˆ¶å°æ— é”™è¯¯

### åç«¯è¿æ¥æµ‹è¯•
- [ ] å¯åŠ¨åç«¯æœåŠ¡ï¼ˆ8080 ç«¯å£ï¼‰
- [ ] åˆ·æ–°å‰ç«¯é¡µé¢
- [ ] æŸ¥çœ‹æ§åˆ¶å°ï¼Œè¯·æ±‚å‘é€åˆ° `/api/*`
- [ ] æ•°æ®ä»åç«¯æ­£å¸¸è¿”å›
- [ ] é¡µé¢æ˜¾ç¤ºåç«¯çœŸå®æ•°æ®

---

## ğŸ“ æ–‡ä»¶æ¸…å•

### æ–°å¢æ–‡ä»¶
```
UI/
â”œâ”€â”€ .env                    # ç¯å¢ƒå˜é‡é…ç½®
â””â”€â”€ src/
    â””â”€â”€ api/
        â””â”€â”€ mock.js        # Mock æ•°æ®æœåŠ¡
```

### ä¿®æ”¹æ–‡ä»¶
```
UI/
â””â”€â”€ src/
    â”œâ”€â”€ api/
    â”‚   â””â”€â”€ index.js       # æ·»åŠ äº†è‡ªåŠ¨é™çº§é€»è¾‘
    â””â”€â”€ components/
        â””â”€â”€ layout/
            â””â”€â”€ Header.jsx  # ä¿®å¤äº†å›¾æ ‡å¯¼å…¥
```

---

## ğŸ¯ åç«¯ API æ¥å£æ¸…å•

å‰ç«¯éœ€è¦åç«¯æä¾›ä»¥ä¸‹æ¥å£ï¼š

### æ–‡æ¡£ç®¡ç†
```
GET    /api/documents              # è·å–æ–‡æ¡£åˆ—è¡¨
GET    /api/documents/:id          # è·å–æ–‡æ¡£è¯¦æƒ…
POST   /api/documents/upload       # ä¸Šä¼ æ–‡æ¡£
DELETE /api/documents/:id          # åˆ é™¤æ–‡æ¡£
GET    /api/documents/:id/download # ä¸‹è½½æ–‡æ¡£
```

### è§’è‰²ç®¡ç†
```
GET    /api/roles                 # è·å–è§’è‰²åˆ—è¡¨
GET    /api/roles/:id             # è·å–è§’è‰²è¯¦æƒ…
POST   /api/roles                 # åˆ›å»ºè§’è‰²
PUT    /api/roles/:id             # æ›´æ–°è§’è‰²
DELETE /api/roles/:id             # åˆ é™¤è§’è‰²
GET    /api/roles/statistics      # è·å–è§’è‰²ç»Ÿè®¡
```

### åé¦ˆä¸æ¼”åŒ–
```
GET    /api/feedback/conflicts         # è·å–å†²çªåˆ—è¡¨
POST   /api/feedback/vote              # æŠ•ç¥¨
GET    /api/feedback/evolution/:id     # è·å–æ¼”åŒ–å†å²
GET    /api/feedback/quality-monitor   # è·å–è´¨é‡ç›‘æ§
```

### åä½œç½‘ç»œ
```
GET    /api/collaboration/peers              # è·å–ä¼™ä¼´åˆ—è¡¨
POST   /api/collaboration/generate-code      # ç”Ÿæˆè¿æ¥ç 
POST   /api/collaboration/connect            # è¿æ¥ä¼™ä¼´
DELETE /api/collaboration/peers/:id          # æ–­å¼€è¿æ¥
POST   /api/collaboration/peers/:id/sync     # åŒæ­¥æ•°æ®
GET    /api/collaboration/exchange-history   # è·å–äº¤æ¢å†å²
GET    /api/collaboration/topology           # è·å–ç½‘ç»œæ‹“æ‰‘
GET    /api/collaboration/sync-status        # è·å–åŒæ­¥çŠ¶æ€
```

### æ™ºèƒ½é—®ç­”
```
POST   /api/qa/ask                # æé—®
GET    /api/qa/history            # è·å–å†å²è®°å½•
POST   /api/qa/feedback           # åé¦ˆ
GET    /api/qa/similar-questions  # è·å–ç›¸ä¼¼é—®é¢˜
```

---

## âš™ï¸ åç«¯å¼€å‘å»ºè®®

### å“åº”æ ¼å¼ï¼ˆå»ºè®®ç»Ÿä¸€ï¼‰
```json
{
  "code": 200,
  "message": "success",
  "data": {
    // å®é™…æ•°æ®
  }
}
```

### é”™è¯¯å“åº”
```json
{
  "code": 400,
  "message": "é”™è¯¯ä¿¡æ¯",
  "data": null
}
```

### åˆ†é¡µå“åº”
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "list": [...],
    "total": 100,
    "page": 1,
    "pageSize": 10
  }
}
```

---

## ğŸ‰ æ€»ç»“

### å½“å‰çŠ¶æ€
- âœ… å‰ç«¯å®Œå…¨å¯ç”¨ï¼ˆå³ä½¿åç«¯æœªå¯åŠ¨ï¼‰
- âœ… è‡ªåŠ¨é™çº§æœºåˆ¶å·²é…ç½®
- âœ… Mock æ•°æ®è¦†ç›–æ‰€æœ‰ä¸»è¦åŠŸèƒ½
- âœ… æ”¯æŒçƒ­åˆ‡æ¢ï¼ˆåç«¯å¯åŠ¨åè‡ªåŠ¨è¿æ¥ï¼‰

### ä¼˜åŠ¿
1. **å‰ç«¯å¼€å‘ä¸é˜»å¡**: åç«¯æœªå®Œæˆæ—¶ï¼Œå‰ç«¯å¯ä»¥ç»§ç»­å¼€å‘å’Œæµ‹è¯•
2. **æ¼”ç¤ºå‹å¥½**: æ²¡æœ‰åç«¯ä¹Ÿèƒ½æ¼”ç¤ºæ‰€æœ‰åŠŸèƒ½
3. **è‡ªåŠ¨åˆ‡æ¢**: åç«¯å¯åŠ¨åè‡ªåŠ¨ä½¿ç”¨çœŸå®æ•°æ®
4. **æ˜“äºè°ƒè¯•**: æ§åˆ¶å°æ¸…æ™°æ˜¾ç¤ºæ•°æ®æ¥æº

### ä¸‹ä¸€æ­¥
1. å¯åŠ¨åç«¯æœåŠ¡
2. å®ç°çœŸå®çš„ API æ¥å£
3. å‰ç«¯è‡ªåŠ¨è¿æ¥åˆ°åç«¯
4. æµ‹è¯•æ‰€æœ‰åŠŸèƒ½
5. å…³é—­ Mock æ¨¡å¼ï¼ˆè®¾ç½® `AUTO_FALLBACK_TO_MOCK = false`ï¼‰

---

**æ–‡æ¡£åˆ›å»ºæ—¶é—´**: 2025-12-12  
**ä½œè€…**: AI Reviewer Team  
**çŠ¶æ€**: âœ… è”è°ƒé…ç½®å®Œæˆï¼Œéšæ—¶å¯ä»¥å¼€å§‹æµ‹è¯•

