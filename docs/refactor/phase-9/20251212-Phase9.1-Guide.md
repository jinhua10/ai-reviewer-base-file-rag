# Phase 9 开发指南 - 愿望单系统界面
# Phase 9 Development Guide - Wish List System UI

> **当前任务**: Phase 9.1 愿望单系统界面  
> **状态**: 🚧 准备开始  
> **优先级**: 🔥 高优先级  
> **预计时间**: 3天

---

## 🎯 任务概览

### 目标
构建用户驱动的功能愿望系统，收集用户反馈，引导系统演进。

### 要实现的组件（7个）
```yaml
1. WishList.jsx          - 愿望单列表主组件 ⭐ 核心
2. WishCard.jsx          - 愿望卡片组件
3. WishSubmit.jsx        - 提交愿望表单
4. WishVote.jsx          - 投票组件
5. WishDetail.jsx        - 愿望详情模态框
6. WishRanking.jsx       - 愿望排行榜
7. WishComments.jsx      - 愿望评论区
```

### 要创建的CSS文件（6个）
```yaml
1. wish-list.css         - 列表样式
2. wish-card.css         - 卡片样式
3. wish-submit.css       - 表单样式
4. wish-detail.css       - 详情样式
5. wish-ranking.css      - 排行榜样式
6. wish-comments.css     - 评论样式
```

---

## 📋 开发清单

### ✅ 前置条件（已完成）
- ✅ Phase 7: 前端基础架构（已完成）
  - ✅ Babel + JSX 编译环境
  - ✅ 通用组件库（Button, Modal, Loading等）
  - ✅ API 封装（axios + hooks）
  - ✅ 状态管理（Context + Hooks）
  - ✅ 主题系统（CSS变量 + 暗色模式）

- ✅ Phase 8: 核心功能界面（已完成）
  - ✅ 34个核心组件
  - ✅ 30个CSS文件
  - ✅ 国际化系统

### 🚧 Phase 9.1 开发步骤

#### 步骤 1: 创建组件文件结构
```bash
# 创建目录
src/main/resources/static/js/components/wish/
src/main/resources/static/assets/css/wish/

# 文件列表
js/components/wish/
  - WishList.jsx
  - WishCard.jsx
  - WishSubmit.jsx
  - WishVote.jsx
  - WishDetail.jsx
  - WishRanking.jsx
  - WishComments.jsx

assets/css/wish/
  - wish-list.css
  - wish-card.css
  - wish-submit.css
  - wish-detail.css
  - wish-ranking.css
  - wish-comments.css
```

#### 步骤 2: 开发核心组件

##### 2.1 WishList.jsx - 愿望单列表
```javascript
功能:
  - 展示愿望列表（网格/列表视图切换）
  - 搜索和筛选（状态、分类）
  - 排序（最新、最热、最多投票）
  - 分页或无限滚动
  - 加载状态和空状态

使用的通用组件:
  - Loading (Phase 7)
  - Button (Phase 7)
  - Select (Ant Design)
```

##### 2.2 WishCard.jsx - 愿望卡片
```javascript
功能:
  - 显示愿望基本信息（标题、描述摘要）
  - 显示状态标签（待审核、进行中等）
  - 显示投票数和评论数
  - 点击查看详情
  - 快速投票按钮

样式:
  - 卡片悬停效果
  - 状态标签颜色
  - 响应式布局
```

##### 2.3 WishSubmit.jsx - 提交愿望表单
```javascript
功能:
  - 标题输入（必填，最多50字）
  - 描述输入（必填，最多500字）
  - 分类选择（功能增强、Bug修复、界面优化）
  - 表单验证
  - 提交成功/失败提示

使用的通用组件:
  - Modal (Phase 7)
  - Button (Phase 7)
  - Toast (Phase 7)
```

##### 2.4 WishVote.jsx - 投票组件
```javascript
功能:
  - 点赞按钮
  - 点踩按钮（可选）
  - 投票数显示
  - 已投票状态显示
  - 防重复投票

样式:
  - 按钮激活状态
  - 投票动画效果
```

##### 2.5 WishDetail.jsx - 愿望详情
```javascript
功能:
  - 完整信息展示
  - 状态历史时间线
  - 投票组件集成
  - 评论区集成
  - 分享按钮

使用的通用组件:
  - Modal (Phase 7)
  - WishVote
  - WishComments
```

##### 2.6 WishRanking.jsx - 排行榜
```javascript
功能:
  - 前10名愿望展示
  - 排名变化指示
  - 快速跳转到详情
  - 实时更新

样式:
  - 排名徽章（金银铜）
  - 渐变背景
```

##### 2.7 WishComments.jsx - 评论区
```javascript
功能:
  - 评论列表展示
  - 发表评论（支持@用户）
  - 评论回复（嵌套）
  - 评论点赞
  - 评论排序（最新、最热）

使用的通用组件:
  - Button (Phase 7)
  - Loading (Phase 7)
```

#### 步骤 3: 创建CSS样式文件

##### 样式规范
```css
/* 必须遵守 */
1. 禁止内联样式
2. 使用 BEM 命名法
3. 使用 CSS 变量（主题色、间距）
4. 响应式设计
5. 暗色模式支持

/* 示例 */
.wish-list {
  padding: var(--spacing-lg);
  background: var(--color-bg-primary);
}

.wish-list__header {
  display: flex;
  justify-content: space-between;
  margin-bottom: var(--spacing-md);
}

.wish-list__title {
  font-size: var(--font-size-xl);
  color: var(--color-text-primary);
}

/* 响应式 */
@media (max-width: 768px) {
  .wish-list {
    padding: var(--spacing-md);
  }
}

/* 暗色模式 */
[data-theme="dark"] .wish-card {
  background: var(--color-bg-secondary-dark);
  border-color: var(--color-border-dark);
}
```

#### 步骤 4: 添加国际化文本

##### zh.json（中文）
```json
{
  "wish": {
    "title": "愿望单",
    "submit": "提交愿望",
    "submitSuccess": "愿望提交成功",
    "submitFailed": "愿望提交失败",
    "vote": "投票",
    "voted": "已投票",
    "comment": "评论",
    "comments": "条评论",
    "ranking": "排行榜",
    "viewDetail": "查看详情",
    "category": {
      "feature": "功能增强",
      "bug": "Bug修复",
      "interface": "界面优化"
    },
    "status": {
      "pending": "待审核",
      "in_progress": "进行中",
      "completed": "已完成",
      "rejected": "已拒绝"
    },
    "filter": {
      "all": "全部",
      "status": "按状态筛选",
      "category": "按分类筛选"
    },
    "sort": {
      "latest": "最新",
      "hottest": "最热",
      "most_voted": "最多投票"
    },
    "form": {
      "title": "愿望标题",
      "titlePlaceholder": "请输入愿望标题（最多50字）",
      "description": "愿望描述",
      "descriptionPlaceholder": "请详细描述您的愿望（最多500字）",
      "category": "愿望分类",
      "categoryPlaceholder": "请选择分类",
      "submit": "提交",
      "cancel": "取消"
    },
    "empty": "暂无愿望，快来提交第一个吧！",
    "loading": "加载中..."
  }
}
```

##### en.json（英文）
```json
{
  "wish": {
    "title": "Wish List",
    "submit": "Submit Wish",
    "submitSuccess": "Wish submitted successfully",
    "submitFailed": "Failed to submit wish",
    "vote": "Vote",
    "voted": "Voted",
    "comment": "Comment",
    "comments": "comments",
    "ranking": "Ranking",
    "viewDetail": "View Detail",
    "category": {
      "feature": "Feature Enhancement",
      "bug": "Bug Fix",
      "interface": "UI Optimization"
    },
    "status": {
      "pending": "Pending",
      "in_progress": "In Progress",
      "completed": "Completed",
      "rejected": "Rejected"
    },
    "filter": {
      "all": "All",
      "status": "Filter by Status",
      "category": "Filter by Category"
    },
    "sort": {
      "latest": "Latest",
      "hottest": "Hottest",
      "most_voted": "Most Voted"
    },
    "form": {
      "title": "Title",
      "titlePlaceholder": "Enter wish title (max 50 chars)",
      "description": "Description",
      "descriptionPlaceholder": "Describe your wish in detail (max 500 chars)",
      "category": "Category",
      "categoryPlaceholder": "Select category",
      "submit": "Submit",
      "cancel": "Cancel"
    },
    "empty": "No wishes yet. Be the first to submit!",
    "loading": "Loading..."
  }
}
```

#### 步骤 5: API 接口封装

##### api/modules/wish.js
```javascript
import api from '../index';

export const wishApi = {
  // 获取愿望列表
  getWishes: (params) => {
    return api.get('/api/wishes', { params });
  },

  // 获取愿望详情
  getWishDetail: (id) => {
    return api.get(`/api/wishes/${id}`);
  },

  // 提交愿望
  submitWish: (data) => {
    return api.post('/api/wishes', data);
  },

  // 投票
  voteWish: (id, voteType) => {
    return api.post(`/api/wishes/${id}/vote`, { voteType });
  },

  // 获取评论
  getComments: (wishId, params) => {
    return api.get(`/api/wishes/${wishId}/comments`, { params });
  },

  // 添加评论
  addComment: (wishId, data) => {
    return api.post(`/api/wishes/${wishId}/comments`, data);
  },

  // 获取排行榜
  getRanking: () => {
    return api.get('/api/wishes/ranking');
  }
};
```

#### 步骤 6: 集成到主应用

##### App.jsx 更新
```javascript
// 导入愿望单组件
import WishList from './components/wish/WishList';

// 在导航中添加愿望单标签
<Tabs.TabPane tab={t('nav.wish')} key="wish">
  <WishList />
</Tabs.TabPane>
```

##### locales 更新
```json
// zh.json
{
  "nav": {
    "wish": "愿望单"
  }
}

// en.json
{
  "nav": {
    "wish": "Wish List"
  }
}
```

#### 步骤 7: 测试与调试

```yaml
功能测试:
  - [ ] 愿望列表正确显示
  - [ ] 提交愿望成功
  - [ ] 投票功能正常
  - [ ] 评论功能正常
  - [ ] 排行榜更新
  - [ ] 搜索筛选正常

样式测试:
  - [ ] 响应式布局正常
  - [ ] 暗色模式切换正常
  - [ ] 无内联样式
  - [ ] 悬停效果正常

国际化测试:
  - [ ] 中英文切换正常
  - [ ] 所有文本已翻译
  - [ ] 无硬编码文本

性能测试:
  - [ ] 列表加载流畅
  - [ ] 无明显卡顿
  - [ ] 图片懒加载
```

---

## 🎨 设计参考

### 布局建议
```
┌─────────────────────────────────────────────────┐
│ 愿望单 [提交愿望]  [搜索框]  [筛选] [排序]      │
├─────────────────────────────────────────────────┤
│ ┌─────────┐ ┌─────────┐ ┌─────────┐           │
│ │ 愿望1   │ │ 愿望2   │ │ 愿望3   │           │
│ │ 描述... │ │ 描述... │ │ 描述... │           │
│ │ 👍 42   │ │ 👍 38   │ │ 👍 35   │           │
│ └─────────┘ └─────────┘ └─────────┘           │
│ ┌─────────┐ ┌─────────┐ ┌─────────┐           │
│ │ 愿望4   │ │ 愿望5   │ │ 愿望6   │           │
│ │ 描述... │ │ 描述... │ │ 描述... │           │
│ │ 👍 30   │ │ 👍 28   │ │ 👍 25   │           │
│ └─────────┘ └─────────┘ └─────────┘           │
├─────────────────────────────────────────────────┤
│ 排行榜 →                                        │
│ 🥇 愿望A (100票)                                │
│ 🥈 愿望B (85票)                                 │
│ 🥉 愿望C (72票)                                 │
└─────────────────────────────────────────────────┘
```

### 颜色方案
```css
/* 状态颜色 */
--wish-status-pending: #faad14;      /* 橙色 - 待审核 */
--wish-status-in-progress: #1890ff;  /* 蓝色 - 进行中 */
--wish-status-completed: #52c41a;    /* 绿色 - 已完成 */
--wish-status-rejected: #f5222d;     /* 红色 - 已拒绝 */

/* 投票按钮 */
--wish-vote-active: #1890ff;         /* 激活状态 */
--wish-vote-hover: #40a9ff;          /* 悬停状态 */
```

---

## 📝 代码规范提醒

### ✅ 必须遵守
1. **JSX格式**: 所有组件使用 JSX 格式
2. **样式分离**: 禁止内联样式，必须提取到 CSS 文件
3. **BEM命名**: CSS 类名使用 BEM 命名法
4. **国际化**: 使用 `t()` 函数，不硬编码文本
5. **组件导出**: 使用 `export default`
6. **Hooks**: 优先使用 React Hooks

### ❌ 禁止事项
1. ❌ 不使用内联样式（style={{...}}）
2. ❌ 不硬编码文本
3. ❌ 不使用 var 声明变量
4. ❌ 不直接操作 DOM
5. ❌ 不在循环中使用索引作为 key

### 📖 参考文档
- 代码规范: `docs/refactor/20251209-23-00-00-CODE_STANDARDS.md`
- 前端规范: `docs/refactor/FRONTEND_STANDARDS.md`
- Phase 7 总结: `docs/refactor/phase-7/20251212-Phase7-Final-Summary.md`
- Phase 8 进度: `docs/refactor/phase-8/20251212-Phase8-Progress.md`

---

## 🚀 开始开发

### 命令
```bash
# 告诉 Copilot
"开始实施 Phase 9.1: 愿望单系统界面"

# 或者更具体
"创建 WishList.jsx 组件和 wish-list.css 样式文件"

# 或者按步骤
"按照 Phase 9.1 开发清单的步骤 1-7 依次实现"
```

### 开发顺序
```
1. WishList.jsx + wish-list.css           (30分钟)
2. WishCard.jsx + wish-card.css           (30分钟)
3. WishSubmit.jsx + wish-submit.css       (45分钟)
4. WishVote.jsx                           (20分钟)
5. WishDetail.jsx + wish-detail.css       (40分钟)
6. WishRanking.jsx + wish-ranking.css     (30分钟)
7. WishComments.jsx + wish-comments.css   (45分钟)
8. API 封装 (api/modules/wish.js)         (30分钟)
9. 国际化文本 (zh.json + en.json)         (20分钟)
10. 集成到 App.jsx                        (15分钟)
11. 测试与调试                            (1小时)

总计: ~6小时 (实际约1天)
```

---

## 💡 成功关键

```yaml
关键点:
  1. 严格遵守代码规范
  2. 样式必须提取到 CSS 文件
  3. 所有文本必须国际化
  4. 组件可复用性
  5. 响应式设计
  6. 暗色模式支持
  7. 加载状态处理
  8. 错误提示友好
  9. 性能优化（懒加载）
  10. 及时测试验证
```

---

**准备好了吗？让我们开始创建愿望单系统界面！** 🚀

---

**文档版本**: v1.0  
**创建日期**: 2025-12-12  
**维护者**: AI Reviewer Team

