<!DOCTYPE html>
<html lang="zh-CN" id="html-root">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI æ–‡æ¡£å®¡æŸ¥ç³»ç»Ÿ - æ¨¡å—åŒ–ç‰ˆæœ¬</title>

    <!-- æ ·å¼æ–‡ä»¶ -->
    <link rel="stylesheet" href="assets/css/reset.css">
    <link rel="stylesheet" href="assets/css/main.css">
    <link rel="stylesheet" href="assets/css/datepicker.css">

    <!-- React åº“ (ä½¿ç”¨ CDN æˆ–æœ¬åœ°æ–‡ä»¶) -->
    <script crossorigin src="js/lib/react.production.min.js"></script>
    <script crossorigin src="js/lib/react-dom.production.min.js"></script>
</head>
<body>
    <div id="root"></div>

    <!-- åŠ è½½é¡ºåºï¼šä¾èµ– -> å·¥å…· -> ç»„ä»¶ -> ä¸»åº”ç”¨ -->

    <!-- 1. ç¿»è¯‘å­—å…¸ -->
    <script src="js/lang/lang.js"></script>

    <!-- 2. API æ¥å£ -->
    <script src="js/api/api.js"></script>

    <!-- 3. æ ·å¼å¸¸é‡ -->
    <script src="js/styles/constants.js"></script>

    <!-- 4. å…¬å…±ç»„ä»¶ -->
    <script src="js/components/common/LanguageContext.js"></script>
    <script src="js/components/common/DatePicker.js"></script>

    <!-- 5. UIç»„ä»¶åº“ -->
    <script src="js/components/tabs/DocumentsTabComponents.js"></script>

    <!-- 6. æ ‡ç­¾é¡µç»„ä»¶ -->
    <script src="js/components/tabs/DocumentsTab.js"></script>
    <!-- å…¶ä»–æ ‡ç­¾é¡µç»„ä»¶å¯ä»¥æŒ‰éœ€åŠ è½½ -->

    <!-- 7. ä¸»åº”ç”¨ - ç®€åŒ–ç‰ˆ -->
    <script>
        (function() {
            // ä»å…¨å±€å¯¹è±¡ä¸­è§£æ„éœ€è¦çš„æ¨¡å—
            const { LanguageProvider, useTranslation } = window.LanguageModule;
            const { useState, useEffect } = React;

            // ä¸»åº”ç”¨ç»„ä»¶
            function App() {
                const { t, toggleLanguage, language } = useTranslation();
            const [activeTab, setActiveTab] = useState('documents');
            const [health, setHealth] = useState(null);

            useEffect(() => {
                checkHealth();
            }, []);

            const checkHealth = async () => {
                try {
                    const result = await window.api.health();
                    setHealth(result);
                } catch (err) {
                    setHealth({ status: 'DOWN', message: 'Service connection failed' });
                }
            };

            return React.createElement('div', { className: 'app-container' },
                // è¯­è¨€åˆ‡æ¢æŒ‰é’®
                React.createElement('div', { className: 'language-toggle' },
                    React.createElement('button', {
                        onClick: toggleLanguage,
                        style: window.StyleConstants.createButton('primary', 'gradientPurple')
                    }, t('langToggle'))
                ),

                // å¤´éƒ¨
                React.createElement('header', { className: 'header' },
                    React.createElement('h1', null, t('title')),
                    React.createElement('p', null, t('subtitle')),
                    health && React.createElement('div', {
                        className: `health-status ${health.status?.toLowerCase() || 'down'}`,
                        style: { marginTop: '10px' }
                    }, `${t('healthStatus')}: ${health.status || 'DOWN'}`)
                ),

                // æ ‡ç­¾é¡µå¯¼èˆª
                React.createElement('div', { className: 'tabs' },
                    ['qa', 'search', 'documents', 'statistics'].map(tab =>
                        React.createElement('button', {
                            key: tab,
                            className: `tab ${activeTab === tab ? 'active' : ''}`,
                            onClick: () => setActiveTab(tab)
                        }, t(`tab${tab.charAt(0).toUpperCase() + tab.slice(1)}`))
                    )
                ),

                // æ ‡ç­¾é¡µå†…å®¹
                React.createElement('div', { className: 'tab-content' },
                    activeTab === 'documents' && React.createElement(window.DocumentsTab),
                    activeTab === 'qa' && React.createElement('div', { className: 'coming-soon' },
                        React.createElement('h2', null, 'ğŸ’¬ ' + t('tabQa')),
                        React.createElement('p', null, t('comingSoon'))
                    ),
                    activeTab === 'search' && React.createElement('div', { className: 'coming-soon' },
                        React.createElement('h2', null, 'ğŸ” ' + t('tabSearch')),
                        React.createElement('p', null, t('comingSoon'))
                    ),
                    activeTab === 'statistics' && React.createElement('div', { className: 'coming-soon' },
                        React.createElement('h2', null, 'ğŸ“Š ' + t('tabStatistics')),
                        React.createElement('p', null, t('comingSoon'))
                    )
                ),

                // é¡µè„š
                React.createElement('footer', { className: 'footer' },
                    React.createElement('p', null, 'Â© 2024 AI Document Review System')
                )
            );
        }

            // æ¸²æŸ“åº”ç”¨
            ReactDOM.render(
                React.createElement(LanguageProvider, null,
                    React.createElement(App)
                ),
                document.getElementById('root')
            );
        })(); // ç»“æŸç«‹å³æ‰§è¡Œå‡½æ•°
    </script>
</body>
</html>

