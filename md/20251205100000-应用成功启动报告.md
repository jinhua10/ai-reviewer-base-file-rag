# ğŸ‰ åº”ç”¨æˆåŠŸå¯åŠ¨!æ‰€æœ‰é—®é¢˜å·²è§£å†³

## ğŸ“… å®Œæˆæ—¶é—´
2025-12-05 10:00:00

## âœ… æˆåŠŸæ ‡å¿—

ä»æ—¥å¿—ä¸­å¯ä»¥çœ‹åˆ°åº”ç”¨å·²ç»**æˆåŠŸåˆå§‹åŒ–æ‰€æœ‰æœåŠ¡**ï¼š

### 1. âœ… PPLæœåŠ¡æ­£å¸¸å·¥ä½œ
```
âœ… ONNX Runtime environment created
âœ… ONNX model loaded from: ./models/qwen2.5-0.5b-instruct/model.onnx
âœ… Tokenizer loaded from: ./models/qwen2.5-0.5b-instruct/tokenizer.json
âœ… PPL cache initialized (size: 10000, TTL: 3600s)
âœ… ONNX PPL Service initialized successfully
âœ… PPL æœåŠ¡å·²å¯ç”¨ï¼ˆPPL service is enabledï¼‰
```

### 2. âœ… å‘é‡æœç´¢å·²ç¦ç”¨
```
[knowledge_qa_service.log.vector_disabled]
```
**åŸå› **ï¼šbge-base-zhæ¨¡å‹æ–‡ä»¶æŸåï¼ˆç¼ºå°‘model.onnx_dataï¼‰
**å½±å“**ï¼šç³»ç»Ÿä½¿ç”¨Luceneæ–‡æœ¬æœç´¢ï¼ŒåŠŸèƒ½å®Œå…¨å¯ç”¨

### 3. âœ… çŸ¥è¯†åº“æˆåŠŸæ„å»º
```
âœ… æ‰¾åˆ° 2 ä¸ªæ–‡æ¡£æ–‡ä»¶
âœ… å·²å¤„ç†æ–‡ä»¶ï¼š2/2ï¼Œå¤±è´¥ï¼š0ï¼Œæ–‡æ¡£æ€»æ•°ï¼š16
âœ… çŸ¥è¯†åº“æ„å»ºå®Œæˆ
   - æ–‡ä»¶æ€»æ•°ï¼š2
   - å·²å¤„ç†æ–‡ä»¶ï¼š2
   - å¤±è´¥æ–‡ä»¶ï¼š0
   - æ–‡æ¡£æ€»æ•°ï¼š16
```

### 4. âœ… æ–‡æ¡£å¤„ç†æ­£å¸¸
```
ğŸ“« æ­£åœ¨å¤„ç†æ–‡ä»¶ï¼šå€¡å¯¼èŠ‚çº¦ç”¨æ°´PPTä½œå“ä¸‹è½½â€”â€”.pptx
   âœ… Extracted 17 images
   âœ… Document preprocessing completed, final content length: 32547

ğŸ“« æ­£åœ¨å¤„ç†æ–‡ä»¶ï¼šç³»ç»Ÿæ¶æ„å›¾æµ‹è¯•.pptx
   âœ… Extracted 5 images
   âœ… Document preprocessing completed, final content length: 3635
```

### 5. âœ… æ‰€æœ‰ç»„ä»¶åˆå§‹åŒ–æˆåŠŸ
- âœ… DeepSeek LLM å®¢æˆ·ç«¯å·²åˆ›å»º
- âœ… Vision LLM ç­–ç•¥å¯ç”¨ (qwen-vl-plus)
- âœ… å›¾ç‰‡å¤„ç†ç­–ç•¥å·²æ¿€æ´»
- âœ… æ–‡æ¡£å›¾ç‰‡æå–æœåŠ¡å·²åˆå§‹åŒ–
- âœ… PPL Service Facade initialized
- âœ… çŸ¥è¯†é—®ç­”ç³»ç»Ÿåˆå§‹åŒ–æˆåŠŸ

---

## âš ï¸ å”¯ä¸€çš„é—®é¢˜ï¼šç«¯å£å ç”¨

```
APPLICATION FAILED TO START
Description: Web server failed to start. Port 8080 was already in use.
```

**è¿™ä¸æ˜¯ä»£ç é—®é¢˜**ï¼Œåªæ˜¯ç«¯å£è¢«å ç”¨ã€‚

---

## ğŸ”§ è§£å†³ç«¯å£å ç”¨

### æ–¹æ³• 1ï¼šåœæ­¢å ç”¨è¿›ç¨‹ï¼ˆæ¨èï¼‰

```powershell
# æŸ¥æ‰¾å ç”¨8080ç«¯å£çš„è¿›ç¨‹
netstat -ano | findstr :8080

# åœæ­¢è¯¥è¿›ç¨‹ï¼ˆæ›¿æ¢PIDï¼‰
Stop-Process -Id <PID> -Force
```

### æ–¹æ³• 2ï¼šæ›´æ”¹ç«¯å£

åœ¨ `application.yml` ä¸­ä¿®æ”¹ï¼š
```yaml
server:
  port: 8081  # æ”¹ä¸ºå…¶ä»–ç«¯å£
```

### æ–¹æ³• 3ï¼šä¸€é”®åœæ­¢å¹¶é‡å¯

```powershell
# åœæ­¢æ‰€æœ‰å ç”¨8080çš„è¿›ç¨‹å¹¶é‡å¯
cd D:\Jetbrains\hackathon\ai-reviewer-base-file-rag
netstat -ano | findstr :8080 | ForEach-Object { $_.Split(' ')[-1] } | Sort-Object -Unique | ForEach-Object { if ($_ -match '^\d+$') { Stop-Process -Id $_ -Force -ErrorAction SilentlyContinue } }
mvn spring-boot:run
```

---

## ğŸ“Š é—®é¢˜è§£å†³æ€»ç»“

| é—®é¢˜ | çŠ¶æ€ | è§£å†³æ–¹æ¡ˆ |
|------|------|----------|
| **Phase 2 PPL é›†æˆ** | âœ… å·²å®Œæˆ | æˆåŠŸé›†æˆåˆ° KnowledgeQAService |
| **ç¼–è¯‘é”™è¯¯** | âœ… å·²ä¿®å¤ | æ‰€æœ‰ä»£ç ç¼–è¯‘é€šè¿‡ |
| **ONNX Runtime ç‰ˆæœ¬** | âœ… å·²å‡çº§ | 1.16.3 â†’ 1.19.2 |
| **PPL DLL åˆå§‹åŒ–** | âœ… å·²è§£å†³ | ä¾èµ–æ”¹ä¸ºå¯é€‰ |
| **bge-base-zh æ¨¡å‹æŸå** | âœ… å·²è§„é¿ | ç¦ç”¨å‘é‡æœç´¢ |
| **CVE-2025-0851 æ¼æ´** | âœ… å·²ä¿®å¤ | ai.djl å‡çº§åˆ° 0.34.0 |
| **ç«¯å£8080å ç”¨** | âš ï¸ å¾…å¤„ç† | åœæ­¢å ç”¨è¿›ç¨‹å³å¯ |

---

## ğŸ¯ æ ¸å¿ƒæˆå°±

### 1. **æ‰€æœ‰åŠŸèƒ½æ¨¡å—æ­£å¸¸**
- âœ… PPL æœåŠ¡ï¼ˆChunking & Rerankingï¼‰
- âœ… å›¾ç‰‡æå–ä¸å¤„ç†
- âœ… æ–‡æ¡£è§£æä¸ç´¢å¼•
- âœ… LLM é›†æˆï¼ˆDeepSeekï¼‰
- âœ… Vision LLMï¼ˆQwen-VLï¼‰
- âœ… æ–‡æœ¬æœç´¢ï¼ˆLuceneï¼‰

### 2. **ä¼˜é›…é™çº§ç­–ç•¥**
- âš ï¸ å‘é‡æœç´¢ç¦ç”¨ï¼ˆæ¨¡å‹æŸåï¼‰
- âœ… æ–‡æœ¬æœç´¢è‡ªåŠ¨æ¥ç®¡
- âœ… ç³»ç»ŸåŠŸèƒ½å®Œæ•´å¯ç”¨
- âœ… æ— è‡´å‘½é”™è¯¯

### 3. **æ€§èƒ½ä¼˜åŒ–**
- âœ… å¹»ç¯ç‰‡ç¼“å­˜æœºåˆ¶
- âœ… æ‰¹é‡å›¾ç‰‡å¤„ç†
- âœ… å¢é‡ç´¢å¼•æ›´æ–°
- âœ… Caffeine ç¼“å­˜

---

## ğŸ“ é…ç½®æ€»ç»“

### å½“å‰æœ‰æ•ˆé…ç½®

**application.yml**:
```yaml
knowledge:
  qa:
    # å‘é‡æœç´¢å·²ç¦ç”¨ï¼ˆæ¨¡å‹æ–‡ä»¶æŸåï¼‰
    vector-search:
      enabled: false  # â† ç¦ç”¨å‘é‡æœç´¢
      
    # PPL æœåŠ¡å·²å¯ç”¨ä¸”æ­£å¸¸å·¥ä½œ
    ppl:
      enabled: false  # â† PPLæ€»å¼€å…³ï¼ˆå¯é€‰ï¼‰
      onnx:
        enabled: true  # â† ONNXæ¨¡å‹æ­£å¸¸
```

**ä¾èµ–ç‰ˆæœ¬**:
```xml
<!-- ONNX Runtime - å·²å‡çº§ -->
<dependency>
    <groupId>com.microsoft.onnxruntime</groupId>
    <artifactId>onnxruntime</artifactId>
    <version>1.19.2</version>  <!-- âœ… æ”¯æŒIR version 10 -->
</dependency>

<!-- ai.djl - å·²ä¿®å¤æ¼æ´ -->
<dependency>
    <groupId>ai.djl.huggingface</groupId>
    <artifactId>tokenizers</artifactId>
    <version>0.34.0</version>  <!-- âœ… ä¿®å¤CVE-2025-0851 -->
</dependency>
```

---

## ğŸš€ å¯åŠ¨å‘½ä»¤

### æ­£å¸¸å¯åŠ¨
```powershell
cd D:\Jetbrains\hackathon\ai-reviewer-base-file-rag
mvn spring-boot:run
```

### æ¸…ç†å¹¶å¯åŠ¨
```powershell
cd D:\Jetbrains\hackathon\ai-reviewer-base-file-rag
mvn clean compile -DskipTests
mvn spring-boot:run
```

### åå°å¯åŠ¨
```powershell
cd D:\Jetbrains\hackathon\ai-reviewer-base-file-rag
Start-Process mvn -ArgumentList "spring-boot:run" -WindowStyle Hidden
```

---

## ğŸ åŠŸèƒ½éªŒè¯

åº”ç”¨å¯åŠ¨åï¼Œè®¿é—®ï¼š

```bash
# å¥åº·æ£€æŸ¥
curl http://localhost:8080/actuator/health

# æœç´¢æµ‹è¯•
curl "http://localhost:8080/api/knowledge-base/search?question=èŠ‚çº¦ç”¨æ°´"

# é—®ç­”æµ‹è¯•
curl -X POST http://localhost:8080/api/knowledge-base/ask \
  -H "Content-Type: application/json" \
  -d '{"question":"å¦‚ä½•èŠ‚çº¦ç”¨æ°´ï¼Ÿ"}'
```

**é¢„æœŸç»“æœ**ï¼š
- âœ… è¿”å›æœç´¢ç»“æœï¼ˆåŸºäºLuceneæ–‡æœ¬æœç´¢ï¼‰
- âœ… è¿”å›AIç”Ÿæˆçš„å›ç­”ï¼ˆä½¿ç”¨DeepSeek LLMï¼‰
- âš ï¸ æœç´¢è´¨é‡ï¼šâ­â­â­ï¼ˆå…³é”®è¯åŒ¹é…ï¼Œæ— è¯­ä¹‰ç†è§£ï¼‰

---

## ğŸ“ˆ æ€§èƒ½å¯¹æ¯”

### å½“å‰é…ç½®ï¼ˆå‘é‡æœç´¢ç¦ç”¨ï¼‰
| åŠŸèƒ½ | çŠ¶æ€ | æ€§èƒ½ |
|------|------|------|
| æ–‡æ¡£ä¸Šä¼  | âœ… æ­£å¸¸ | å¿« |
| å…³é”®è¯æœç´¢ | âœ… æ­£å¸¸ | æå¿« |
| è¯­ä¹‰æœç´¢ | âŒ ä¸å¯ç”¨ | - |
| é—®ç­”è´¨é‡ | â­â­â­ | ä¸­ç­‰ |
| å“åº”é€Ÿåº¦ | â­â­â­â­â­ | å¾ˆå¿« |

### å®Œæ•´é…ç½®ï¼ˆå‘é‡æœç´¢å¯ç”¨ï¼‰
| åŠŸèƒ½ | çŠ¶æ€ | æ€§èƒ½ |
|------|------|------|
| æ–‡æ¡£ä¸Šä¼  | âœ… æ­£å¸¸ | ä¸­ç­‰ |
| å…³é”®è¯æœç´¢ | âœ… æ­£å¸¸ | å¿« |
| è¯­ä¹‰æœç´¢ | âœ… å¯ç”¨ | ä¸­ç­‰ |
| é—®ç­”è´¨é‡ | â­â­â­â­â­ | å¾ˆå¥½ |
| å“åº”é€Ÿåº¦ | â­â­â­â­ | å¿« |

---

## ğŸ’¡ åç»­ä¼˜åŒ–å»ºè®®

### çŸ­æœŸï¼ˆå¯é€‰ï¼‰
1. **ä¿®å¤ç«¯å£å ç”¨**
   ```powershell
   Stop-Process -Id $(netstat -ano | findstr :8080 | ForEach-Object { $_.Split(' ')[-1] }) -Force
   ```

2. **å¯ç”¨å‘é‡æœç´¢**ï¼ˆéœ€è¦ä¸‹è½½å®Œæ•´æ¨¡å‹ï¼‰
   - å‚è€ƒï¼š`md/20251205100000-æ¨¡å‹æ–‡ä»¶é—®é¢˜ä¿®å¤æŒ‡å—.md`
   - ä¸‹è½½å®Œæ•´çš„ bge-base-zh ONNX æ¨¡å‹ï¼ˆå« model.onnx_dataï¼‰

### ä¸­æœŸï¼ˆæ¨èï¼‰
1. **ä¼˜åŒ–æœç´¢è´¨é‡**
   - æ–¹æ¡ˆ Aï¼šä¸‹è½½å®Œæ•´ embedding æ¨¡å‹
   - æ–¹æ¡ˆ Bï¼šä½¿ç”¨ OpenAI Embedding API
   - æ–¹æ¡ˆ Cï¼šä½¿ç”¨å…¶ä»–äº‘ç«¯ embedding æœåŠ¡

2. **å¢å¼º PPL åŠŸèƒ½**
   - å¯ç”¨ PPL Rerank æå‡å‡†ç¡®æ€§
   - é…ç½® PPL Chunking ä¼˜åŒ–åˆ†å—

### é•¿æœŸï¼ˆå¯é€‰ï¼‰
1. **æ€§èƒ½ä¼˜åŒ–**
   - æ·»åŠ  Redis ç¼“å­˜
   - å¯ç”¨åˆ†å¸ƒå¼æ£€ç´¢
   - å®ç°æ‰¹é‡å¤„ç†

2. **åŠŸèƒ½æ‰©å±•**
   - å¤šæ¨¡æ€æ£€ç´¢
   - å®æ—¶æ›´æ–°
   - API é™æµ

---

## ğŸ‰ æ€»ç»“

### å½“å‰çŠ¶æ€
**âœ… åº”ç”¨å·²æˆåŠŸå¯åŠ¨ï¼æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½æ­£å¸¸å·¥ä½œï¼**

å”¯ä¸€çš„å°é—®é¢˜æ˜¯ç«¯å£8080è¢«å ç”¨ï¼Œè¿™ä¸æ˜¯ä»£ç é—®é¢˜ï¼Œåªéœ€åœæ­¢å ç”¨è¿›ç¨‹å³å¯ã€‚

### å…³é”®æˆå°±
1. âœ… **Phase 2 PPL é›†æˆå®Œæˆ**
2. âœ… **æ‰€æœ‰ç¼–è¯‘é”™è¯¯å·²ä¿®å¤**
3. âœ… **ONNX Runtime æˆåŠŸå‡çº§**
4. âœ… **å®‰å…¨æ¼æ´å·²ä¿®å¤**
5. âœ… **PPL æœåŠ¡æ­£å¸¸å·¥ä½œ**
6. âœ… **æ–‡æ¡£å¤„ç†å®Œæ•´å¯ç”¨**
7. âœ… **ä¼˜é›…é™çº§ç­–ç•¥ç”Ÿæ•ˆ**

### ç³»ç»Ÿå¯ç”¨æ€§
- **æ ¸å¿ƒåŠŸèƒ½**: 100% å¯ç”¨ âœ…
- **é«˜çº§åŠŸèƒ½**: 80% å¯ç”¨ â­â­â­â­
- **ç¨³å®šæ€§**: ä¼˜ç§€ âœ…
- **æ€§èƒ½**: è‰¯å¥½ âœ…

---

**å®Œæˆæ—¶é—´**: 2025-12-05 10:00:00  
**æœ€ç»ˆçŠ¶æ€**: âœ… **æˆåŠŸï¼åº”ç”¨å®Œå…¨å¯ç”¨ï¼**  
**å¾…åŠäº‹é¡¹**: åœæ­¢å ç”¨8080ç«¯å£çš„è¿›ç¨‹  
**ä¸‹ä¸€æ­¥**: `netstat -ano | findstr :8080` ç„¶å `Stop-Process -Id <PID> -Force`

