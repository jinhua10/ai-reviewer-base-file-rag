# AI Reviewer äº‘æœåŠ¡å™¨éƒ¨ç½²æœ€å°é…ç½®æŒ‡å—

> **æ–‡æ¡£æ—¥æœŸ**: 2025-12-07  
> **é€‚ç”¨ç‰ˆæœ¬**: v2.0.0  
> **éƒ¨ç½²ç±»å‹**: ç”Ÿäº§ç¯å¢ƒæœ€å°é…ç½®

---

## ğŸ¯ ä¸€ã€æœ€å°æœåŠ¡å™¨é…ç½®

### æ–¹æ¡ˆ 1ï¼šçº¯æ–‡æœ¬æ£€ç´¢ï¼ˆæœ€å°é…ç½®ï¼‰

**é€‚ç”¨åœºæ™¯**ï¼šæˆæœ¬æ•æ„Ÿã€å°è§„æ¨¡æ–‡æ¡£ï¼ˆ<1000ä¸ªï¼‰

| é…ç½®é¡¹ | æœ€å°å€¼ | æ¨èå€¼ | è¯´æ˜ |
|--------|--------|--------|------|
| **CPU** | 2 æ ¸ | 4 æ ¸ | å¤„ç† LLM è¯·æ±‚å’Œæ–‡æœ¬æ£€ç´¢ |
| **å†…å­˜** | 2 GB | 4 GB | JVM + Spring Boot + Lucene ç´¢å¼• |
| **ç£ç›˜** | 20 GB | 50 GB | ç³»ç»Ÿ + åº”ç”¨ + æ–‡æ¡£å­˜å‚¨ |
| **å¸¦å®½** | 1 Mbps | 5 Mbps | æ–‡ä»¶ä¸Šä¼ å’Œ API è°ƒç”¨ |

**é…ç½®è¯´æ˜**ï¼š
```yaml
# ç¦ç”¨å‘é‡æ£€ç´¢ï¼Œä»…ä½¿ç”¨ Lucene å…¨æ–‡æ£€ç´¢
knowledge:
  qa:
    vector-search:
      enabled: false  # å…³é”®ï¼šèŠ‚çœå†…å­˜
    
    ppl:
      enabled: false  # å…³é”®ï¼šèŠ‚çœ CPU
    
    hope:
      enabled: true   # å¯é€‰ï¼šå‡å°‘ LLM è°ƒç”¨
```

**JVM é…ç½®**ï¼š
```bash
-Xms512m -Xmx1536m  # æœ€å° 512MBï¼Œæœ€å¤§ 1.5GB
-XX:+UseG1GC
-XX:MaxGCPauseMillis=200
```

**æˆæœ¬é¢„ä¼°**ï¼š
- é˜¿é‡Œäº‘ ECS t5ï¼ˆ2æ ¸2GBï¼‰ï¼šçº¦ Â¥50/æœˆ
- è…¾è®¯äº‘è½»é‡ï¼ˆ2æ ¸2GBï¼‰ï¼šçº¦ Â¥50/æœˆ
- AWS t3.smallï¼ˆ2æ ¸2GBï¼‰ï¼šçº¦ $10/æœˆ

---

### æ–¹æ¡ˆ 2ï¼šå‘é‡æ£€ç´¢ï¼ˆæ ‡å‡†é…ç½®ï¼‰â­ æ¨è

**é€‚ç”¨åœºæ™¯**ï¼šä¸­ç­‰è§„æ¨¡ï¼ˆ1000-10000ä¸ªæ–‡æ¡£ï¼‰ï¼Œéœ€è¦è¯­ä¹‰æ£€ç´¢

| é…ç½®é¡¹ | æœ€å°å€¼ | æ¨èå€¼ | è¯´æ˜ |
|--------|--------|--------|------|
| **CPU** | 2 æ ¸ | 4 æ ¸ | å‘é‡è®¡ç®— + LLM è¯·æ±‚ |
| **å†…å­˜** | 4 GB | 8 GB | å‘é‡ç´¢å¼•ï¼ˆ768ç»´ï¼‰çº¦éœ€ 1-2GB |
| **ç£ç›˜** | 30 GB | 100 GB | æ¨¡å‹æ–‡ä»¶ï¼ˆ400MBï¼‰+ å‘é‡ç´¢å¼• |
| **å¸¦å®½** | 3 Mbps | 10 Mbps | æ¨¡å‹ä¸‹è½½ + API è°ƒç”¨ |

**é…ç½®è¯´æ˜**ï¼š
```yaml
knowledge:
  qa:
    vector-search:
      enabled: true           # å¯ç”¨å‘é‡æ£€ç´¢
      model: bge-base-zh      # å·²å†…ç½®ï¼Œæ— éœ€ä¸‹è½½
    
    ppl:
      enabled: false          # ç¦ç”¨ PPLï¼ˆèŠ‚çœèµ„æºï¼‰
    
    hope:
      enabled: true           # æ¨èï¼šèŠ‚çœ 20-30% LLM è°ƒç”¨
```

**JVM é…ç½®**ï¼š
```bash
-Xms1g -Xmx3g  # æœ€å° 1GBï¼Œæœ€å¤§ 3GB
-XX:+UseG1GC
-XX:MaxGCPauseMillis=200
```

**æˆæœ¬é¢„ä¼°**ï¼š
- é˜¿é‡Œäº‘ ECS s6ï¼ˆ2æ ¸4GBï¼‰ï¼šçº¦ Â¥90/æœˆ
- è…¾è®¯äº‘æ ‡å‡†å‹ï¼ˆ2æ ¸4GBï¼‰ï¼šçº¦ Â¥100/æœˆ
- AWS t3.mediumï¼ˆ2æ ¸4GBï¼‰ï¼šçº¦ $30/æœˆ

---

### æ–¹æ¡ˆ 3ï¼šå®Œæ•´åŠŸèƒ½ï¼ˆé«˜é…ç½®ï¼‰

**é€‚ç”¨åœºæ™¯**ï¼šå¤§è§„æ¨¡ï¼ˆ10000+æ–‡æ¡£ï¼‰ï¼Œéœ€è¦æ‰€æœ‰åŠŸèƒ½

| é…ç½®é¡¹ | æ¨èå€¼ | è¯´æ˜ |
|--------|--------|------|
| **CPU** | 4-8 æ ¸ | PPL + å‘é‡æ£€ç´¢ + å¹¶å‘è¯·æ±‚ |
| **å†…å­˜** | 8-16 GB | å¤šä¸ªæ¨¡å‹ + å¤§é‡å‘é‡ + ç¼“å­˜ |
| **ç£ç›˜** | 100-500 GB | æ¨¡å‹ + å‘é‡ + æ–‡æ¡£ + æ—¥å¿— |
| **å¸¦å®½** | 10+ Mbps | é«˜å¹¶å‘ |

**æˆæœ¬é¢„ä¼°**ï¼š
- é˜¿é‡Œäº‘ ECSï¼ˆ4æ ¸8GBï¼‰ï¼šçº¦ Â¥300/æœˆ
- è…¾è®¯äº‘æ ‡å‡†å‹ï¼ˆ4æ ¸8GBï¼‰ï¼šçº¦ Â¥350/æœˆ

---

## ğŸ“¦ äºŒã€éƒ¨ç½²å‰å‡†å¤‡æ¸…å•

### 2.1 å¿…éœ€è½¯ä»¶

âœ… **JDK 17 æˆ– 21**
```bash
# æ£€æŸ¥ Java ç‰ˆæœ¬
java -version

# æ¨èä½¿ç”¨ OpenJDK
# Amazon Corretto 17: https://aws.amazon.com/corretto/
# æˆ– Alibaba Dragonwell: https://dragonwell-jdk.io/
```

âœ… **æ•°æ®åº“ï¼ˆå¯é€‰ï¼‰**
- é»˜è®¤ä½¿ç”¨æ–‡ä»¶å­˜å‚¨ï¼Œæ— éœ€æ•°æ®åº“
- å¦‚éœ€æŒä¹…åŒ–é…ç½®ï¼Œå¯é€‰ MySQL/PostgreSQL

âœ… **åå‘ä»£ç†ï¼ˆæ¨èï¼‰**
```bash
# Nginx æˆ– Caddy
# ç”¨äº HTTPSã€è´Ÿè½½å‡è¡¡ã€é™æ€æ–‡ä»¶ç¼“å­˜
```

### 2.2 ç½‘ç»œè¦æ±‚

âœ… **å‡ºç«™è®¿é—®**
- LLM APIï¼šéœ€è®¿é—® DeepSeek/OpenAI ç­‰
- æ¨¡å‹ä¸‹è½½ï¼šHuggingFaceï¼ˆé¦–æ¬¡å¯åŠ¨ï¼‰

âœ… **å…¥ç«™ç«¯å£**
- 8080ï¼šåº”ç”¨ç«¯å£ï¼ˆå¯ä¿®æ”¹ï¼‰
- 80/443ï¼šNginx ç«¯å£ï¼ˆå¦‚ä½¿ç”¨ï¼‰

### 2.3 ç£ç›˜ç©ºé—´åˆ†é…

```
å»ºè®®åˆ†åŒºæ–¹æ¡ˆï¼ˆ50GB æ€»ç©ºé—´ï¼‰ï¼š

/app                  # åº”ç”¨ç›®å½•ï¼ˆ10GBï¼‰
â”œâ”€â”€ release/         # å‘å¸ƒåŒ…ï¼ˆ2GBï¼‰
â”œâ”€â”€ models/          # æ¨¡å‹æ–‡ä»¶ï¼ˆ1GBï¼‰
â””â”€â”€ logs/            # æ—¥å¿—ï¼ˆé¢„ç•™ 5GBï¼‰

/data                # æ•°æ®ç›®å½•ï¼ˆ35GBï¼‰
â”œâ”€â”€ documents/       # ç”¨æˆ·æ–‡æ¡£ï¼ˆ20GBï¼‰
â”œâ”€â”€ knowledge-base/  # ç´¢å¼•ï¼ˆ5GBï¼‰
â”œâ”€â”€ vector-index/    # å‘é‡ï¼ˆ5GBï¼‰
â””â”€â”€ hope/            # HOPE æ•°æ®ï¼ˆ1GBï¼‰

/tmp                 # ä¸´æ—¶æ–‡ä»¶ï¼ˆ5GBï¼‰
â””â”€â”€ uploads/         # ä¸Šä¼ ç¼“å­˜
```

---

## ğŸš€ ä¸‰ã€éƒ¨ç½²æ­¥éª¤ï¼ˆLinuxï¼‰

### 3.1 ç¯å¢ƒå‡†å¤‡

```bash
# 1. å®‰è£… JDK 17
sudo yum install -y java-17-openjdk  # CentOS/RHEL
# æˆ–
sudo apt install -y openjdk-17-jdk   # Ubuntu/Debian

# 2. åˆ›å»ºåº”ç”¨ç”¨æˆ·ï¼ˆå®‰å…¨æ€§ï¼‰
sudo useradd -r -s /bin/false ai-reviewer

# 3. åˆ›å»ºåº”ç”¨ç›®å½•
sudo mkdir -p /opt/ai-reviewer
sudo chown -R ai-reviewer:ai-reviewer /opt/ai-reviewer
cd /opt/ai-reviewer
```

### 3.2 ä¸Šä¼ åº”ç”¨

```bash
# æ–¹å¼1ï¼šSCP ä¸Šä¼ 
scp -r release/ user@server:/opt/ai-reviewer/

# æ–¹å¼2ï¼šä½¿ç”¨ Git
git clone https://github.com/your-repo/ai-reviewer.git
cd ai-reviewer
```

### 3.3 é…ç½®ç¯å¢ƒå˜é‡

```bash
# åˆ›å»ºç¯å¢ƒå˜é‡æ–‡ä»¶
sudo nano /opt/ai-reviewer/.env
```

**æœ€å°é…ç½® `.env` æ–‡ä»¶**ï¼š
```bash
# LLM API é…ç½®ï¼ˆå¿…éœ€ï¼‰
AI_API_KEY=sk-your-deepseek-api-key
AI_API_URL=https://api.deepseek.com

# åº”ç”¨é…ç½®
SERVER_PORT=8080
SPRING_PROFILES_ACTIVE=prod

# JVM é…ç½®ï¼ˆæ ¹æ®æœåŠ¡å™¨å†…å­˜è°ƒæ•´ï¼‰
JAVA_OPTS=-Xms512m -Xmx2g -XX:+UseG1GC
```

### 3.4 åˆ›å»ºå¯åŠ¨è„šæœ¬

**æœ€å°åŒ–å¯åŠ¨è„šæœ¬** `/opt/ai-reviewer/start.sh`ï¼š

```bash
#!/bin/bash
# AI Reviewer å¯åŠ¨è„šæœ¬ï¼ˆæœ€å°é…ç½®ï¼‰

set -e

# åŠ è½½ç¯å¢ƒå˜é‡
if [ -f .env ]; then
    export $(cat .env | grep -v '^#' | xargs)
fi

# åº”ç”¨ç›®å½•
APP_DIR=/opt/ai-reviewer/release
JAR_FILE=$(ls $APP_DIR/*.jar | head -n 1)

# æ—¥å¿—ç›®å½•
LOG_DIR=$APP_DIR/logs
mkdir -p $LOG_DIR

# JVM å‚æ•°ï¼ˆæœ€å°é…ç½®ï¼š2GB å†…å­˜ï¼‰
JAVA_OPTS="${JAVA_OPTS:--Xms512m -Xmx1536m}"
JAVA_OPTS="$JAVA_OPTS -Dfile.encoding=UTF-8"
JAVA_OPTS="$JAVA_OPTS -Djava.security.egd=file:/dev/./urandom"
JAVA_OPTS="$JAVA_OPTS -XX:+UseG1GC"
JAVA_OPTS="$JAVA_OPTS -XX:MaxGCPauseMillis=200"

# åº”ç”¨å‚æ•°
APP_OPTS="--spring.config.location=$APP_DIR/config/application.yml"
APP_OPTS="$APP_OPTS --server.port=${SERVER_PORT:-8080}"

# å¯åŠ¨
echo "ğŸš€ Starting AI Reviewer..."
nohup java $JAVA_OPTS \
    -jar $JAR_FILE \
    $APP_OPTS \
    > $LOG_DIR/app.log 2>&1 &

PID=$!
echo $PID > $APP_DIR/app.pid
echo "âœ… Started with PID: $PID"
echo "ğŸ“ Log file: $LOG_DIR/app.log"
```

**åœæ­¢è„šæœ¬** `/opt/ai-reviewer/stop.sh`ï¼š

```bash
#!/bin/bash
APP_DIR=/opt/ai-reviewer/release
PID_FILE=$APP_DIR/app.pid

if [ -f $PID_FILE ]; then
    PID=$(cat $PID_FILE)
    kill $PID
    rm $PID_FILE
    echo "âœ… Application stopped"
else
    echo "âŒ PID file not found"
fi
```

```bash
# è®¾ç½®æƒé™
chmod +x /opt/ai-reviewer/start.sh
chmod +x /opt/ai-reviewer/stop.sh
```

### 3.5 é…ç½® Systemd æœåŠ¡ï¼ˆæ¨èï¼‰

**åˆ›å»ºæœåŠ¡æ–‡ä»¶** `/etc/systemd/system/ai-reviewer.service`ï¼š

```ini
[Unit]
Description=AI Reviewer Knowledge QA System
After=network.target

[Service]
Type=simple
User=ai-reviewer
Group=ai-reviewer
WorkingDirectory=/opt/ai-reviewer/release

# ç¯å¢ƒå˜é‡
Environment="JAVA_HOME=/usr/lib/jvm/java-17-openjdk"
EnvironmentFile=/opt/ai-reviewer/.env

# å¯åŠ¨å‘½ä»¤
ExecStart=/usr/bin/java \
    -Xms512m -Xmx2g \
    -XX:+UseG1GC \
    -Dfile.encoding=UTF-8 \
    -jar /opt/ai-reviewer/release/ai-reviewer-base-file-rag-2.0-jar-with-dependencies.jar \
    --spring.config.location=/opt/ai-reviewer/release/config/application.yml

# é‡å¯ç­–ç•¥
Restart=on-failure
RestartSec=10

# æ—¥å¿—
StandardOutput=journal
StandardError=journal

[Install]
WantedBy=multi-user.target
```

**å¯åŠ¨æœåŠ¡**ï¼š
```bash
# é‡è½½ systemd
sudo systemctl daemon-reload

# å¯åŠ¨æœåŠ¡
sudo systemctl start ai-reviewer

# è®¾ç½®å¼€æœºè‡ªå¯
sudo systemctl enable ai-reviewer

# æŸ¥çœ‹çŠ¶æ€
sudo systemctl status ai-reviewer

# æŸ¥çœ‹æ—¥å¿—
sudo journalctl -u ai-reviewer -f
```

---

## âš™ï¸ å››ã€é…ç½®ä¼˜åŒ–ï¼ˆæœ€å°èµ„æºï¼‰

### 4.1 application.yml æœ€å°é…ç½®

**é’ˆå¯¹ 2GB å†…å­˜æœåŠ¡å™¨**ï¼š

```yaml
server:
  port: 8080
  tomcat:
    threads:
      max: 50        # é™ä½çº¿ç¨‹æ•°ï¼ˆé»˜è®¤ 200ï¼‰
      min-spare: 5   # æœ€å°çº¿ç¨‹

spring:
  servlet:
    multipart:
      max-file-size: 50MB      # é™ä½æ–‡ä»¶å¤§å°é™åˆ¶
      max-request-size: 50MB

knowledge:
  qa:
    # å…³é”®ï¼šç¦ç”¨èµ„æºå¯†é›†å‹åŠŸèƒ½
    vector-search:
      enabled: false  # èŠ‚çœ 1-2GB å†…å­˜
    
    ppl:
      enabled: false  # èŠ‚çœ CPU å’Œå†…å­˜
    
    # å¼€å¯èŠ‚çœ LLM æˆæœ¬çš„åŠŸèƒ½
    hope:
      enabled: true
      ordinary:
        max-entries: 1000  # é™åˆ¶ä¸­é¢‘å±‚æ¡ç›®
    
    # é™åˆ¶å¤„ç†çš„æ–‡æ¡£æ•°
    llm:
      max-documents-per-query: 3  # é™ä½åˆ° 3ï¼ˆé»˜è®¤ 5ï¼‰
      max-context-length: 10000   # é™ä½ä¸Šä¸‹æ–‡é•¿åº¦
```

### 4.2 JVM è°ƒä¼˜ï¼ˆå°å†…å­˜ï¼‰

**2GB å†…å­˜æœåŠ¡å™¨çš„ JVM å‚æ•°**ï¼š

```bash
# æ€»å†…å­˜ 2GBï¼Œç•™ 500MB ç»™ç³»ç»Ÿï¼Œåº”ç”¨ä½¿ç”¨ 1.5GB
JAVA_OPTS="-Xms512m -Xmx1536m"

# ä½¿ç”¨ G1GCï¼ˆé€‚åˆå°å †ï¼‰
JAVA_OPTS="$JAVA_OPTS -XX:+UseG1GC"
JAVA_OPTS="$JAVA_OPTS -XX:MaxGCPauseMillis=200"

# é™åˆ¶ GC çº¿ç¨‹æ•°ï¼ˆèŠ‚çœ CPUï¼‰
JAVA_OPTS="$JAVA_OPTS -XX:ParallelGCThreads=2"
JAVA_OPTS="$JAVA_OPTS -XX:ConcGCThreads=1"

# å¯ç”¨å‹ç¼©æŒ‡é’ˆï¼ˆèŠ‚çœå†…å­˜ï¼‰
JAVA_OPTS="$JAVA_OPTS -XX:+UseCompressedOops"

# å‡å°‘å…ƒç©ºé—´å¤§å°
JAVA_OPTS="$JAVA_OPTS -XX:MetaspaceSize=128m"
JAVA_OPTS="$JAVA_OPTS -XX:MaxMetaspaceSize=256m"
```

**4GB å†…å­˜æœåŠ¡å™¨çš„ JVM å‚æ•°**ï¼š

```bash
JAVA_OPTS="-Xms1g -Xmx3g"
JAVA_OPTS="$JAVA_OPTS -XX:+UseG1GC"
JAVA_OPTS="$JAVA_OPTS -XX:MaxGCPauseMillis=200"
```

---

## ğŸ”’ äº”ã€å®‰å…¨é…ç½®

### 5.1 é˜²ç«å¢™è§„åˆ™

```bash
# UFW (Ubuntu)
sudo ufw allow 22/tcp    # SSH
sudo ufw allow 80/tcp    # HTTP
sudo ufw allow 443/tcp   # HTTPS
sudo ufw enable

# Firewalld (CentOS)
sudo firewall-cmd --permanent --add-service=ssh
sudo firewall-cmd --permanent --add-service=http
sudo firewall-cmd --permanent --add-service=https
sudo firewall-cmd --reload
```

### 5.2 Nginx åå‘ä»£ç†ï¼ˆæ¨èï¼‰

**æœ€å° Nginx é…ç½®** `/etc/nginx/conf.d/ai-reviewer.conf`ï¼š

```nginx
upstream ai-reviewer {
    server 127.0.0.1:8080;
}

server {
    listen 80;
    server_name your-domain.com;
    
    # æ–‡ä»¶ä¸Šä¼ å¤§å°é™åˆ¶
    client_max_body_size 100M;
    
    location / {
        proxy_pass http://ai-reviewer;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        
        # è¶…æ—¶è®¾ç½®ï¼ˆLLM å¯èƒ½è¾ƒæ…¢ï¼‰
        proxy_connect_timeout 60s;
        proxy_send_timeout 60s;
        proxy_read_timeout 120s;
    }
    
    # é™æ€æ–‡ä»¶ç¼“å­˜
    location ~* \.(jpg|jpeg|png|gif|ico|css|js)$ {
        proxy_pass http://ai-reviewer;
        expires 7d;
        add_header Cache-Control "public, immutable";
    }
}
```

---

## ğŸ“Š å…­ã€ç›‘æ§å’Œç»´æŠ¤

### 6.1 å¥åº·æ£€æŸ¥

```bash
# æ£€æŸ¥åº”ç”¨çŠ¶æ€
curl http://localhost:8080/actuator/health

# é¢„æœŸå“åº”ï¼š
# {"status":"UP"}
```

### 6.2 æ—¥å¿—ç®¡ç†

```bash
# æŸ¥çœ‹å®æ—¶æ—¥å¿—
tail -f /opt/ai-reviewer/release/logs/app.log

# æ—¥å¿—è½®è½¬é…ç½® /etc/logrotate.d/ai-reviewer
/opt/ai-reviewer/release/logs/*.log {
    daily
    rotate 7
    compress
    delaycompress
    missingok
    notifempty
    create 0644 ai-reviewer ai-reviewer
}
```

### 6.3 è‡ªåŠ¨å¤‡ä»½è„šæœ¬

```bash
#!/bin/bash
# /opt/ai-reviewer/backup.sh

BACKUP_DIR=/backup/ai-reviewer
DATE=$(date +%Y%m%d)

# å¤‡ä»½æ•°æ®ç›®å½•
tar -czf $BACKUP_DIR/data-$DATE.tar.gz /opt/ai-reviewer/release/data

# ä¿ç•™æœ€è¿‘ 7 å¤©
find $BACKUP_DIR -name "data-*.tar.gz" -mtime +7 -delete
```

```bash
# æ·»åŠ åˆ° crontab
crontab -e
# æ¯å¤©å‡Œæ™¨ 3 ç‚¹å¤‡ä»½
0 3 * * * /opt/ai-reviewer/backup.sh
```

---

## ğŸ’° ä¸ƒã€æˆæœ¬ä¼˜åŒ–å»ºè®®

### 7.1 æŒ‰éœ€å¯ç”¨åŠŸèƒ½

| åŠŸèƒ½ | å†…å­˜èŠ‚çœ | æˆæœ¬èŠ‚çœ | æ€§èƒ½å½±å“ |
|------|---------|---------|----------|
| ç¦ç”¨å‘é‡æ£€ç´¢ | ~1-2GB | - | âš ï¸ è¯­ä¹‰æ£€ç´¢èƒ½åŠ›ä¸‹é™ |
| ç¦ç”¨ PPL | ~500MB | - | âš ï¸ æ— æ™ºèƒ½åˆ†å— |
| å¯ç”¨ HOPE | - | ~20-30% LLM è´¹ç”¨ | âœ… å“åº”æ›´å¿« |
| å‡å°‘æ–‡æ¡£æ•°é‡ | ~100MB/1000æ–‡æ¡£ | - | âš ï¸ æ£€ç´¢èŒƒå›´å—é™ |

### 7.2 LLM API é€‰æ‹©

| æä¾›å•† | æˆæœ¬ | é€Ÿåº¦ | ä¸­æ–‡èƒ½åŠ› | æ¨èåº¦ |
|--------|------|------|---------|--------|
| DeepSeek | Â¥1/ç™¾ä¸‡ token | å¿« | â­â­â­â­â­ | â­â­â­â­â­ |
| é˜¿é‡Œé€šä¹‰ | Â¥2/ç™¾ä¸‡ token | å¿« | â­â­â­â­â­ | â­â­â­â­ |
| OpenAI | $10/ç™¾ä¸‡ token | ä¸­ | â­â­â­â­ | â­â­â­ |
| Ollama æœ¬åœ° | å…è´¹ | æ…¢ | â­â­â­ | â­â­â­â­ï¼ˆé›¶æˆæœ¬ï¼‰|

### 7.3 äº‘æœåŠ¡å•†é€‰æ‹©

**å›½å†…ç”¨æˆ·æ¨è**ï¼š
- é˜¿é‡Œäº‘ ECS t5/s6 ç³»åˆ—ï¼ˆæ€§ä»·æ¯”é«˜ï¼‰
- è…¾è®¯äº‘è½»é‡åº”ç”¨æœåŠ¡å™¨ï¼ˆç®€å•æ˜“ç”¨ï¼‰
- åä¸ºäº‘ ECSï¼ˆæ”¿ä¼å®¢æˆ·ï¼‰

**å›½é™…ç”¨æˆ·æ¨è**ï¼š
- AWS t3 ç³»åˆ—ï¼ˆç¨³å®šæ€§å¥½ï¼‰
- Google Cloud e2 ç³»åˆ—ï¼ˆä»·æ ¼é€‚ä¸­ï¼‰
- DigitalOcean Dropletsï¼ˆç®€å•ä¾¿å®œï¼‰

---

## âœ… å…«ã€å¿«é€Ÿéƒ¨ç½²æ£€æŸ¥æ¸…å•

### éƒ¨ç½²å‰

- [ ] JDK 17/21 å·²å®‰è£…
- [ ] æœåŠ¡å™¨å†…å­˜ â‰¥ 2GB
- [ ] ç£ç›˜ç©ºé—´ â‰¥ 20GB
- [ ] å·²è·å– LLM API Key
- [ ] é˜²ç«å¢™å·²é…ç½®
- [ ] åŸŸåå·²è§£æï¼ˆå¦‚éœ€è¦ï¼‰

### éƒ¨ç½²ä¸­

- [ ] åº”ç”¨å·²ä¸Šä¼ 
- [ ] é…ç½®æ–‡ä»¶å·²ä¿®æ”¹ï¼ˆAPI Keyã€ç«¯å£ï¼‰
- [ ] ç¯å¢ƒå˜é‡å·²è®¾ç½®
- [ ] JVM å‚æ•°å·²è°ƒä¼˜
- [ ] Systemd æœåŠ¡å·²åˆ›å»º

### éƒ¨ç½²å

- [ ] åº”ç”¨æˆåŠŸå¯åŠ¨ï¼ˆæ— æŠ¥é”™ï¼‰
- [ ] å¥åº·æ£€æŸ¥é€šè¿‡
- [ ] å¯è®¿é—® Web ç•Œé¢
- [ ] å¯ä¸Šä¼ æ–‡æ¡£å¹¶ç´¢å¼•
- [ ] å¯æ­£å¸¸é—®ç­”
- [ ] æ—¥å¿—æ­£å¸¸è¾“å‡º
- [ ] è‡ªåŠ¨å¤‡ä»½å·²é…ç½®

---

## ğŸ†˜ ä¹ã€å¸¸è§é—®é¢˜

### Q1: OOM (Out of Memory) é”™è¯¯

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# 1. å¢åŠ  JVM å†…å­˜
JAVA_OPTS="-Xms1g -Xmx2g"  # æ ¹æ®æœåŠ¡å™¨å†…å­˜è°ƒæ•´

# 2. ç¦ç”¨å‘é‡æ£€ç´¢
knowledge.qa.vector-search.enabled=false

# 3. å‡å°‘æ–‡æ¡£å¤„ç†æ•°é‡
knowledge.qa.llm.max-documents-per-query=2
```

### Q2: å¯åŠ¨é€Ÿåº¦æ…¢

**åŸå› **ï¼š
- å‘é‡æ¨¡å‹åŠ è½½ï¼ˆçº¦ 30-60 ç§’ï¼‰
- ç´¢å¼•é‡å»ºï¼ˆé¦–æ¬¡å¯åŠ¨ï¼‰

**è§£å†³æ–¹æ¡ˆ**ï¼š
```yaml
knowledge:
  qa:
    knowledge-base:
      rebuild-on-startup: false  # ä¸è‡ªåŠ¨é‡å»º
```

### Q3: LLM API è¶…æ—¶

**è§£å†³æ–¹æ¡ˆ**ï¼š
```yaml
knowledge:
  qa:
    llm:
      timeout: 60000  # å¢åŠ è¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
```

### Q4: ç£ç›˜ç©ºé—´ä¸è¶³

**ç›‘æ§è„šæœ¬**ï¼š
```bash
#!/bin/bash
# æ¸…ç†æ—¥å¿—å’Œä¸´æ—¶æ–‡ä»¶
find /opt/ai-reviewer/release/logs -name "*.log" -mtime +7 -delete
find /opt/ai-reviewer/release/temp -type f -mtime +1 -delete
```

---

## ğŸ“ åã€æ€»ç»“

### æœ€å°å¯è¡Œé…ç½®ï¼ˆæˆæœ¬æœ€ä½ï¼‰

```
æœåŠ¡å™¨ï¼š2æ ¸2GB + 20GBç£ç›˜
é…ç½®ï¼šç¦ç”¨å‘é‡æ£€ç´¢å’Œ PPL
æˆæœ¬ï¼šçº¦ Â¥50/æœˆï¼ˆé˜¿é‡Œäº‘/è…¾è®¯äº‘ï¼‰
é€‚ç”¨ï¼šå°è§„æ¨¡ï¼ˆ<1000 æ–‡æ¡£ï¼‰
```

### æ¨èæ ‡å‡†é…ç½®ï¼ˆæ€§èƒ½å¹³è¡¡ï¼‰â­

```
æœåŠ¡å™¨ï¼š2æ ¸4GB + 50GBç£ç›˜
é…ç½®ï¼šå¯ç”¨å‘é‡æ£€ç´¢ + HOPE
æˆæœ¬ï¼šçº¦ Â¥90-100/æœˆ
é€‚ç”¨ï¼šä¸­ç­‰è§„æ¨¡ï¼ˆ1000-10000 æ–‡æ¡£ï¼‰
```

### é«˜æ€§èƒ½é…ç½®ï¼ˆåŠŸèƒ½å®Œæ•´ï¼‰

```
æœåŠ¡å™¨ï¼š4æ ¸8GB + 100GBç£ç›˜
é…ç½®ï¼šå…¨éƒ¨åŠŸèƒ½å¯ç”¨
æˆæœ¬ï¼šçº¦ Â¥300/æœˆ
é€‚ç”¨ï¼šå¤§è§„æ¨¡ï¼ˆ10000+ æ–‡æ¡£ï¼‰
```

---

**æ–‡æ¡£æ›´æ–°æ—¥æœŸ**: 2025-12-07  
**é€‚ç”¨ç‰ˆæœ¬**: v2.0.0  
**ç»´æŠ¤è€…**: AI Reviewer Team

